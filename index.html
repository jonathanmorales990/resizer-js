<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="utf-8">
		<script type="text/javascript">
			document.addEventListener("DOMContentLoaded", function (event) {
				var element = document.getElementById('resizer');
				resizer = {
					original_width: 0,
					original_height: 0,
					original_x: 0,
					original_y: 0,
					original_mouse_x: 0,
					original_mouse_y: 0,
					minimum_size: 20,
					element: null
				}
				resizer.applyResizer = function (element) {
					element.style.position = 'relative';
					element.style.display = 'inline-block';
					this.addCorners(element);
					this.onClickEvent(element);
					this.onMoveEvent(element);
				}
				resizer.onResizeEvent = function (event) {
					if (hasClass(resizer.currect_corner, 'bottom-right')) {
						var width = resizer.original_width + (event.pageX - resizer.original_mouse_x);
						var height = resizer.original_height + (event.pageY - resizer.original_mouse_y);
						if (width > resizer.minimum_size) {
							resizer.element.style.width = width + 'px';
						}
						if (height > resizer.minimum_size) {
							resizer.element.style.height = height + 'px';
						}
					}
					if (hasClass(resizer.currect_corner, 'bottom-left')) {
						var width = resizer.original_width + (event.pageX - resizer.original_mouse_x);
						var height = resizer.original_height - (event.pageY - resizer.original_mouse_y);
						if (height > resizer.minimum_size) {
							resizer.element.style.height = height + 'px';
						}
						if (width > resizer.minimum_size) {
							resizer.element.style.width = width + 'px';
							resizer.element.style.left = resizer.original_x + (event.pageX - resizer.original_mouse_x) + 'px';
						}
					}
/*					if (hasClass(resizer.currect_corner, 'top-right')) {}
					if (hasClass(resizer.currect_corner, 'top-left')) {}*/
				}
				resizer.addCorners = function (element) {
					var nodeCorner = document.createElement('div');
					setAttributes(nodeCorner, {'class': 'corner top-left'});
					element.appendChild(nodeCorner);
					nodeCorner = nodeCorner.cloneNode(true);
					setAttributes(nodeCorner, {'class': 'corner top-right'});
					element.appendChild(nodeCorner);
					nodeCorner = nodeCorner.cloneNode(true);
					setAttributes(nodeCorner, {'class': 'corner bottom-right'});
					element.appendChild(nodeCorner);
					nodeCorner = nodeCorner.cloneNode(true);
					setAttributes(nodeCorner, {'class': 'corner bottom-left'});
					element.appendChild(nodeCorner);
				}
				resizer.onClickEvent = function (element) {
					element.addEventListener('mousedown', function (event) { 
						element.style.border = '1px solid black';
						resizer.element = element;
						addClass(element, 'enable-resizer');
						event.stopPropagation();
					});
					window.addEventListener('mousedown', function (event) {
						element.style.border = 'none';
						resizer.element = null;
						removeClass(element, 'enable-resizer');
					});
				}
				resizer.onMoveEvent = function (element) {
					var corners = document.getElementsByClassName('corner');

					var endMove = function () {
						window.removeEventListener('mousemove', resizer.onResizeEvent);
						window.removeEventListener('mouseup', endMove);
					};
					for (i=0; i< corners.length; i++) {
						corners[i].addEventListener('mousedown', function (event) {
							event.stopPropagation();
							resizer.original_width = parseFloat(getComputedStyle(element, null).getPropertyValue('width').replace('px', ''));
							resizer.original_height = parseFloat(getComputedStyle(element, null).getPropertyValue('height').replace('px', ''));
							resizer.original_x = element.getBoundingClientRect().left;
							resizer.original_y = element.getBoundingClientRect().top;
							resizer.original_mouse_x = event.pageX;
							resizer.original_mouse_y = event.pageY;
							resizer.currect_corner = event.target;
							window.addEventListener('mousemove', resizer.onResizeEvent);
							window.addEventListener('mouseup', endMove);
						});
					}
				}
				resizer.applyResizer(element);
			});
			function hasClass (el, className) {
				if (el.classList)
					return el.classList.contains(className);
				return !!el.className.match(new RegExp('(\\s|^)' + className + '(\\s|$)'));
			}
			function addClass (el, className) {
				if (el.classList)
					el.classList.add(className)
				else if (!hasClass(el, className))
					el.className += " " + className;
			}
			function removeClass (el, className) {
				if (el.classList)
					el.classList.remove(className)
				else if (hasClass(el, className)) {
					var reg = new RegExp('(\\s|^)' + className + '(\\s|$)');
					el.className = el.className.replace(reg, ' ');
				}
			}
			function setAttributes(el, attrs) {
				for (var key in attrs) {
					el.setAttribute(key, attrs[key]);
				}
			}
		</script>
		<style type="text/css">
			.corner.top-left {
				cursor: nwse-resize;
				display: none;
				position: absolute;
				top: 0;
				left: 0;
				width: 7px;
				height: 7px;
				background-color: black;
			}
			.corner.top-right {
				cursor: nesw-resize;
				display: none;
				position: absolute;
				top: 0;
				right: 0;
				width: 7px;
				height: 7px;
				background-color: black;
			}
			.corner.bottom-left {
				cursor: nesw-resize;
				display: none;
				position: absolute;
				bottom: 0;
				left: 0;
				width: 7px;
				height: 7px;
				background-color: black;
			}
			.corner.bottom-right {
				cursor: nwse-resize;
				display: none;
				position: absolute;
				bottom: 0;
				right: 0;
				width: 7px;
				height: 7px;
				background-color: black;
			}
			.enable-resizer > .corner.top-left,
			.enable-resizer > .corner.top-right,
			.enable-resizer > .corner.bottom-left,
			.enable-resizer > .corner.bottom-right {
				display: block;
			}
		</style>
		<title>Resizer</title>
	</head>
	<body>
		<div id="resizer" style="width: 150px; height: 150px; background-color: lightgrey;"></div>
	</body>
</hmtl>
